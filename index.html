<head>
  <title>Abby's Garden</title>
  <link rel="icon" type="image/gif" href="https://pixelsafari.neocities.org/favicon/nature/plant/plant2.gif">
  <style>
    body {
      width: 100vw;
      height: 100vh;
      position: relative;
      overflow: visible;
      background: url("garden-background.png") no-repeat center center;
      background-size: cover;
    }
  </style>

</head>

<body>

  <script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>

  <script>
    const flowerImages = ["https://icons.iconarchive.com/icons/iconarchive/plasticine/128/Flower-icon.png",
      "https://icons.iconarchive.com/icons/mag1cwind0w/o-sunny-day/128/osd-flower-icon.png",
      "https://icons.iconarchive.com/icons/miniartx/gifts-2/128/rose-icon.png",
      "https://icons.iconarchive.com/icons/iconarchive/wild-camping/128/Flower-Yellow-icon.png",
      "https://icons.iconarchive.com/icons/iconarchive/childrens-book-animals/128/Garden-Flower-icon.png",
      "https://icons.iconarchive.com/icons/google/noto-emoji-animals-nature/128/22325-sunflower-icon.png",
      "https://icons.iconarchive.com/icons/fasticon/nature/128/Pink-Flower-icon.png",
      "https://icons.iconarchive.com/icons/fasticon/nature/128/White-Flower-icon.png"
    ];

    const links = [
      "https://abigailstarr.github.io/final-project/",
      "https://abigailstarr.github.io/redesign-IG/",
      "https://abigailstarr.github.io/internet-letter/"
    ];
    
    //set up mouse position tracking
    let mouseX = window.innerWidth / 2;
    let mouseY = window.innerHeight / 2;
    document.addEventListener("mousemove", (event) => {
      mouseX = event.clientX;
      mouseY = event.clientY;
    });


    function RandomInteger(min, max) {
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(Math.random() * (max - min + 1) + min);
    }

    function addflower() {
      //grab mouse location
      let clickX = mouseX - 32 + "px";
      let clickY = mouseY - 64 + "px";
      
      //pick a random flower
      let randomIndex = Math.floor(Math.random() * flowerImages.length);
      const randomFlower = flowerImages[randomIndex];

      //pick a random link
      randomIndex = Math.floor(Math.random() * links.length)
      const randomLink = links[randomIndex];

      //determine a random growing time
      const growTime = RandomInteger(1, 3) * 60 * 1000; // miliseconds to minutes conversion, flower grows for 1-3 minutes
      let remainingTime = growTime / 1000;

      //create a banner div
      const banner = document.createElement("div")
      banner.innerText = `You planted a flower! It will bloom in ${Math.floor(remainingTime / 60)} minutes!`;
      banner.style.position = "fixed";
      banner.style.top = "2em";
      banner.style.left = "50%";
      banner.style.transform = "translateX(-50%)";
      banner.style.background = "rgba(255, 255, 255, 0.9)";
      banner.style.color = "green";
      banner.style.padding = "10px 20px";
      banner.style.fontSize = "20px";

      // add banner to body
      document.body.appendChild(banner);

      //add loading image on the page where the user clicked
      const flower = document.createElement("img");
      flower.src = "https://cdn.pixabay.com/animation/2022/10/02/19/42/19-42-18-109_512.gif";
      flower.style.position = "absolute";
      flower.style.width = "64px";
      flower.style.height = "64px";
      flower.style.objectFit = "cover";
      flower.style.left = clickX;
      //assuming flower is 128x128px
      flower.style.top = clickY;
      flower.style.cursor = "pointer"; //indicates interactivity
      document.body.appendChild(flower);

      //remove after 5 seconds
      setTimeout(() => {
        banner.remove();

        //create a countdown div
        const countdown = document.createElement("div");
        countdown.style.position = "fixed";
        countdown.style.top = "3em";
        countdown.style.left = "50%";
        countdown.style.transform = "translateX(-50%)";
        countdown.style.background = "rgba(255, 255, 255, 0.9)";
        countdown.style.color = "green";
        countdown.style.padding = "10px 20px";
        countdown.style.fontSize = "20px";
        document.body.appendChild(countdown);

        //create countdown logic
        function updateCountdown() {
          let minutes = Math.floor(remainingTime / 60);
          let seconds = remainingTime % 60;
          countdown.innerText = `‚è≥ Flower blooming in ${minutes}:${seconds < 10 ? "0" : ""}${seconds} minutes...`;

          if (remainingTime > 0) {
            remainingTime--;
            setTimeout(updateCountdown, 1000);
          } else { //i.e. when timer finishes
            countdown.remove();
            
            // create flower element to replace loading
            const flowerFinal = document.createElement("img");
            flowerFinal.src = randomFlower;
            flowerFinal.style.position = "absolute";
            flowerFinal.style.width = "64px";
            flowerFinal.style.height = "64px";
            flowerFinal.style.objectFit = "cover";
            flowerFinal.style.left = clickX + "px";
            flowerFinal.style.top = clickY + "px";
            flowerFinal.style.cursor = "pointer";

            //define link to random website
            const flowerLink = document.createElement("a");
            flowerLink.href = randomLink;
            flowerLink.target = "_blank";
            flowerLink.style.position = "absolute";
            flowerLink.style.left = clickX;
            flowerLink.style.top = clickY;

            //add link to flower
            flowerLink.appendChild(flowerFinal);
            //remove old flower
            document.body.removeChild(flower);
            //replace flower with linked flower
            document.body.appendChild(flowerLink);
            
            console.log("Flower added:", flowerFinal);

            //define & display congrats banner
            const congrt = document.createElement("div");
            congrt.innerText = "üéâ Your flower has bloomed! üå∏";
            congrt.style.position = "fixed";
            congrt.style.top = "2em";
            congrt.style.left = "50%";
            congrt.style.transform = "translateX(-50%)";
            congrt.style.background = "rgba(255, 255, 255, 0.9)";
            congrt.style.color = "green";
            congrt.style.padding = "10px 20px";
            congrt.style.fontSize = "20px";
            document.body.appendChild(congrt);

            //remove congrats banner after 5 seconds
            setTimeout(() => congrt.remove(), 5000);
          }
        }
        updateCountdown();

      }, 5000); // wait 5 seconds before initializing countdown
    }
    nn.on("click", addflower)
  </script>

</body>